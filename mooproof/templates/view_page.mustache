{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    @template mod_mooproof/view_page
    @package mod_mooproof
    @copyright 2025 Brian A. Pool
    @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
}}

<div class="mooproof-container">
    {{#show_remaining}}
    <div class="alert alert-info">
        {{{submissions_remaining_text}}}
    </div>
    {{/show_remaining}}

    <div class="mooproof-input-section">
        <h3>{{{submit_paper_heading}}}</h3>

        <div class="mooproof-tabs">
            <button class="mooproof-tab active" data-tab="paste">{{{paste_text_label}}}</button>
            <button class="mooproof-tab" data-tab="upload">{{{upload_file_label}}}</button>
        </div>

        <div class="mooproof-tab-content active" id="paste-tab">
            <textarea id="mooproof-text-input" class="mooproof-textarea" placeholder="{{{paste_placeholder}}}" rows="15"></textarea>
            <div class="mooproof-word-count">{{word_count_label}}: <span id="word-count">0</span></div>
        </div>

        <div class="mooproof-tab-content" id="upload-tab">
            <div class="mooproof-upload-area" id="upload-area">
                <p>{{{upload_desc}}}</p>
                <input type="file" id="file-input" style="display:none;" accept=".txt,.docx">
                <button class="btn btn-secondary" id="select-file-btn">{{{select_file_label}}}</button>
                <div id="mooproof-file-name"></div>
            </div>
        </div>

        <div class="mooproof-submit-section">
            <button id="mooproof-submit" class="btn btn-primary"{{#submit_disabled}} disabled{{/submit_disabled}}>{{{submit_button_label}}}</button>
        </div>
    </div>

    <div class="mooproof-results-section" id="results-section" style="display:none;">
        <h3>{{{results_heading}}}</h3>
        <div id="proofing-results" class="mooproof-results"></div>

        <div class="mooproof-chat-section" id="chat-section" style="display:none;">
            <h4>{{{ask_questions_heading}}}</h4>
            <div class="mooproof-chat-messages" id="chat-messages"></div>
            <div class="mooproof-chat-input-area">
                <textarea id="chat-input" class="mooproof-chat-input" placeholder="{{{chat_placeholder}}}" rows="2"></textarea>
                <div class="mooproof-chat-controls">
                    <button id="chat-send" class="btn btn-primary btn-sm">{{{send_button_label}}}</button>
                    <span id="chat-remaining" class="mooproof-chat-remaining"></span>
                </div>
            </div>
            <div class="alert alert-info mooproof-chat-warning">{{{chat_warning}}}</div>
        </div>

        <button id="mooproof-reset" class="btn btn-secondary">{{{reset_button_label}}}</button>
    </div>

    <div id="mooproof-loading-indicator" style="display:none;">
        <div class="mooproof-loading">
            <div class="mooproof-spinner-border" role="status"></div>
            <p>{{{proofing_message}}}</p>
        </div>
    </div>
</div>
